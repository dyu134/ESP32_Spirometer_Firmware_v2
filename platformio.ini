; ESPNowCam Freenove ESP32S3CAM
; https://github.com/hpsaturn/esp32s3-cam
; @Hpsaturn 2024

[platformio]
src_dir = ./

[env]
platform = espressif32
framework = arduino
monitor_speed = 115200
monitor_filters = 
  esp32_exception_decoder
  time
build_flags =
  -D CORE_DEBUG_LEVEL=0
  -D BOARD_HAS_PSRAM=1

[env:esp32-s3-pico]
extends = env
board = esp32-s3-devkitc-1  # This is the closest match

# Flash size configuration (8MB)
board_build.flash_mode = dio
board_build.flash_size = 8MB
board_upload.flash_size = 8MB

# PSRAM configuration (2MB - QSPI mode)
board_build.psram = enabled
board_build.psram_mode = qio  # Use QIO for 2MB PSRAM
board_build.psram_freq = 80   # Lower frequency for stability

# ESP32-S3 specific settings
board_build.mcu = esp32s3
board_build.f_cpu = 240000000L

build_flags =
    -DBOARD_HAS_PSRAM
    -mfix-esp32-psram-cache-issue

upload_speed = 460800  # Lower speed for better reliability


lib_deps = 
  adafruit/Adafruit MLX90393 @ ^2.0.5
  adafruit/Adafruit NeoPixel @ ^1.8.0